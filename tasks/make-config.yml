---
#  _      _                   ____   __      _       __     ___            _        
# (_) ___(_)_ __   __ _  __ _|___ \ / /_ __ | | ____ \ \   / / |_ __ _ ___| | _____ 
# | |/ __| | '_ \ / _` |/ _` | __) | || '_ \| |/ / _` | | / /| __/ _` / __| |/ / __|
# | | (__| | | | | (_| | (_| |/ __/| || |_) |   < (_| | |/ / | || (_| \__ \   <\__ \
# |_|\___|_|_| |_|\__, |\__,_|_____| || .__/|_|\_\__, | /_/   \__\__,_|___/_|\_\___/
#                 |___/             \_\_|        |___/_/                            
# make-config
- name: make-config | enabled feature list
  register: icinga2_disabled_features
  changed_when: icinga2_disabled_features.rc > 0
  shell: icinga2 feature list | grep '^Disabled '

- name: make-config | command feature should be enabled
  when: "'command' in icinga2_disabled_features.stdout"
  notify: Restart Icinga2
  shell: icinga2 feature enable command

# Disabled features: api compatlog debuglog gelf graphite influxdb livestatus opentsdb perfdata statusdata syslog
# Enabled features: checker command mainlog notification
#
